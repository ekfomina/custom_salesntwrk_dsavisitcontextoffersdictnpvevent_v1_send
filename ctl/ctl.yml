categories:
  - category:
      id: -1
      name: 'salesntwrk/umiid/custom'
entities:
  - entity:
      id: 926000000
      name: "Прикладные данные блока Сеть Продаж"
      path: "custom/salesntwrk"
      storage: "HDFS"
      parent-id: 900000000
  - entity:
      id: 926010000
      name: "УМиИД"
      path: "custom/salesntwrk/umiid"
      storage: "HDFS"
      parent-id: 926000000
  - entity:
      id: "{{CTL_ENTITY_ID}}"
      name: "УМиИД. Интеграция. custom_salesntwrk_dsavisitcontextoffersdictnpvevent_v1_send"
      path: "custom/salesntwrk/umiid/custom_salesntwrk_dsavisitcontextoffersdictnpvevent_v1_send"
      storage: "HDFS"
      parent-id: 926010000
workflows:
    - monitoring:
        name: "{{CTL_WF_NAME}}"
        profile: "{{PROFILE_CTL_WF}}"
        singleLoading: true
        killyarnjobonerror: true
        category: "{{CATEGORY_CTL_WF}}"
        type: principal
        orchestrator: oozie
        params:
            - param:
                name: realm
                prior_value: "{{REALM}}" # global ansible
            - param:
                name: ctl_url
                prior_value: "{{CTL_URL}}" # global ansible
            - param:
                name: ctl_entity_id
                prior_value: "{{CTL_ENTITY_ID}}"
            - param:
                name: user.name
                prior_value: "{{USER_NAME}}"
            - param:
                name: yarn.queue.name
                prior_value: "{{YARN_QUEUE}}"
            - param:
                name: memory.executor
                prior_value: "{{MEMORY_EXECUTOR}}"
            - param:
                name: number.executor
                prior_value: "{{NUMBER_EXECUTOR}}"
            - param:
                name: cores.executor
                prior_value: "{{CORES_EXECUTOR}}"
            - param:
                name: logstash_url
                prior_value: "{{LOGSTASH_URL}}"
            - param:
                name: app_id
                prior_value: "{{APP_ID}}"
            - param:
                name: topic_name
                prior_value: "{{TOPIC_NAME}}"
            - param:
                name: kafka_bootstrap_servers
                prior_value: "{{KAFKA_BOOTSTRAP_SERVERS}}"
            - param:
                name: kafka_security_protocol
                prior_value: "{{KAFKA_SECURITY_PROTOCOL}}"
            - param:
                name: json_schema_file_name
                prior_value: "{{JSON_SCHEMA_FILE_NAME}}"
            - param:
                name: keystore_jks_file_name
                prior_value: "{{KEYSTORE_JKS_FILE_NAME}}"
            - param:
                name: oozie.wf.application.path
                prior_value: "{{PATH_TO_WORKFLOW_HDFS}}"
            - param:
                name: n_partition
                prior_value: "{{N_PARTITION}}"
            - param:
                name: path_to_proj_hdfs
                prior_value: "{{PATH_TO_PROJ_HDFS}}"
            - param:
                name: increment_mode
                prior_value: "{{INCREMENT_MODE}}"
            - param:
                  name: point_date_mode
                  prior_value: "{{POINT_DATE_MODE}}"
            - param:
                name: synthetic_mode
                prior_value: "{{SYNTHETIC_MODE}}"
            - param:
                name: archive_mode
                prior_value: "{{ARCHIVE_MODE}}"
            - param:
                name: spark_sql_kafka_file_name
                prior_value: "{{SPARK_SQL_KAFKA_FILE_NAME}}"
            - param:
                name: kafka_client_file_name
                prior_value: "{{KAFKA_CLIENT_FILE_NAME}}"
            - param:
                name: kafka_batch_size
                prior_value: "{{KAFKA_BATCH_SIZE}}"
            - param:
                name: kafka_buffer_memory
                prior_value: "{{KAFKA_BUFFER_MEMORY}}"
            - param:
                name: kafka_linger_ms
                prior_value: "{{KAFKA_LINGER_MS}}"
            - param:
                name: kafka_compression_type
                prior_value: "{{KAFKA_COMPRESSION_TYPE}}"
            - param:
                name: kafka_acks
                prior_value: "{{KAFKA_ACKS}}"
            - param:
                name: kafka_client_id
                prior_value: "{{KAFKA_CLIENT_ID}}"
            - param:
                name: path_to_log_in_hdfs
                prior_value: "{{PATH_TO_LOG_IN_HDFS}}"
            - param:
                name: path_to_python
                prior_value: "{{PATH_TO_PYTHON}}"
            - param:
                name: hadoop_conf_dir
                prior_value: "{{HADOOP_CONF_DIR}}"
            - param:
                name: spark_major_version
                prior_value: "{{SPARK_MAJOR_VERSION}}"